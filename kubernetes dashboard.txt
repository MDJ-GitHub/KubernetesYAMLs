kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml

kubectl -n kubernetes-dashboard patch svc/kubernetes-dashboard -p '{"spec": {"type": "NodePort"}}'

kubectl -n kubernetes-dashboard get svc/kubernetes-dashboard

kubectl create serviceaccount admin-user -n kubernetes-dashboard

kubectl create clusterrolebinding admin-user-binding \
  --clusterrole=cluster-admin \
  --serviceaccount=kubernetes-dashboard:admin-user

SECRET_NAME=$(kubectl -n kubernetes-dashboard get serviceaccount/admin-user -o jsonpath="{.secrets[0].name}")

TOKEN=$(kubectl -n kubernetes-dashboard get secret "$SECRET_NAME" -o jsonpath="{.data.token}" | base64 --decode)

echo "Your Dashboard token: $TOKEN"

kubectl proxy
